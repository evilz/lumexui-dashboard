@page "/music"
@using LumexUI
@using LumexUI.Common

<PageTitle>Music</PageTitle>

<div class="flex flex-col h-full -m-4 lg:-m-6">
    <!-- Menu Bar (hidden on mobile) -->
    <TabletUp Display="flex" Class="items-center gap-1 px-4 py-2 border-b border-divider bg-default-50">
        <LumexDropdown>
            <LumexDropdownTrigger>
                <LumexButton Variant="Variant.Light" Size="Size.Small" Class="font-semibold">Music</LumexButton>
            </LumexDropdownTrigger>
            <LumexDropdownMenu AriaLabel="Music menu">
                <LumexDropdownItem>About Music</LumexDropdownItem>
                <LumexDropdownItem>Preferences...</LumexDropdownItem>
                <LumexDropdownItem>Hide Music</LumexDropdownItem>
                <LumexDropdownItem Color="ThemeColor.Danger">Quit Music</LumexDropdownItem>
            </LumexDropdownMenu>
        </LumexDropdown>

        <LumexDropdown>
            <LumexDropdownTrigger>
                <LumexButton Variant="Variant.Light" Size="Size.Small">File</LumexButton>
            </LumexDropdownTrigger>
            <LumexDropdownMenu AriaLabel="File menu">
                <LumexDropdownItem>New</LumexDropdownItem>
                <LumexDropdownItem>Open Stream URL...</LumexDropdownItem>
                <LumexDropdownItem>Close Window</LumexDropdownItem>
                <LumexDropdownItem>Library</LumexDropdownItem>
                <LumexDropdownItem>Import...</LumexDropdownItem>
            </LumexDropdownMenu>
        </LumexDropdown>

        <LumexDropdown>
            <LumexDropdownTrigger>
                <LumexButton Variant="Variant.Light" Size="Size.Small">Edit</LumexButton>
            </LumexDropdownTrigger>
            <LumexDropdownMenu AriaLabel="Edit menu">
                <LumexDropdownItem>Undo</LumexDropdownItem>
                <LumexDropdownItem>Redo</LumexDropdownItem>
                <LumexDropdownItem>Cut</LumexDropdownItem>
                <LumexDropdownItem>Copy</LumexDropdownItem>
                <LumexDropdownItem>Paste</LumexDropdownItem>
            </LumexDropdownMenu>
        </LumexDropdown>

        <LumexDropdown>
            <LumexDropdownTrigger>
                <LumexButton Variant="Variant.Light" Size="Size.Small">View</LumexButton>
            </LumexDropdownTrigger>
            <LumexDropdownMenu AriaLabel="View menu">
                <LumexDropdownItem>Show Playing Next</LumexDropdownItem>
                <LumexDropdownItem>Show Lyrics</LumexDropdownItem>
                <LumexDropdownItem>Show Status Bar</LumexDropdownItem>
                <LumexDropdownItem>Hide Sidebar</LumexDropdownItem>
                <LumexDropdownItem>Enter Full Screen</LumexDropdownItem>
            </LumexDropdownMenu>
        </LumexDropdown>

        <LumexDropdown>
            <LumexDropdownTrigger>
                <LumexButton Variant="Variant.Light" Size="Size.Small">Account</LumexButton>
            </LumexDropdownTrigger>
            <LumexDropdownMenu AriaLabel="Account menu">
                <LumexDropdownItem>Switch Account</LumexDropdownItem>
                <LumexDropdownItem>Andy</LumexDropdownItem>
                <LumexDropdownItem>Benoit</LumexDropdownItem>
                <LumexDropdownItem>Luis</LumexDropdownItem>
                <LumexDropdownItem>Manage Family...</LumexDropdownItem>
                <LumexDropdownItem>Add Account...</LumexDropdownItem>
            </LumexDropdownMenu>
        </LumexDropdown>
    </TabletUp>

    <!-- Main Content Area -->
    <div class="flex flex-1 overflow-hidden">
        <!-- Mobile Sidebar Toggle -->
        <MobileFab HideAt="md" OnClick="@(() => _sidebarOpen = !_sidebarOpen)" Class="bottom-24">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </MobileFab>

        <!-- Mobile Sidebar Overlay -->
        <MobileOverlay Visible="_sidebarOpen" HideAt="md" OnClick="@(() => _sidebarOpen = false)" />

        <!-- Sidebar -->
        <aside class="@GetSidebarClass()">
            <div class="p-4 space-y-6">
                <!-- Discover Section -->
                <div>
                    <h4 class="text-xs font-semibold text-default-500 uppercase tracking-wider mb-3 px-3">Discover</h4>
                    <div class="space-y-1">
                        <LumexButton Variant="Variant.Light" Class="@GetSidebarButtonClass("listen")" OnClick="@(() => _activeSection = "listen")">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Listen Now
                        </LumexButton>
                        <LumexButton Variant="Variant.Light" Class="@GetSidebarButtonClass("browse")" OnClick="@(() => _activeSection = "browse")">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                            </svg>
                            Browse
                        </LumexButton>
                        <LumexButton Variant="Variant.Light" Class="@GetSidebarButtonClass("radio")" OnClick="@(() => _activeSection = "radio")">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.636 18.364a9 9 0 010-12.728m12.728 0a9 9 0 010 12.728m-9.9-2.829a5 5 0 010-7.07m7.072 0a5 5 0 010 7.07M13 12a1 1 0 11-2 0 1 1 0 012 0z"></path>
                            </svg>
                            Radio
                        </LumexButton>
                    </div>
                </div>

                <!-- Library Section -->
                <div>
                    <h4 class="text-xs font-semibold text-default-500 uppercase tracking-wider mb-3 px-3">Library</h4>
                    <div class="space-y-1">
                        <LumexButton Variant="Variant.Light" Class="@GetSidebarButtonClass("playlists")" OnClick="@(() => _activeSection = "playlists")">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
                            </svg>
                            Playlists
                        </LumexButton>
                        <LumexButton Variant="Variant.Light" Class="@GetSidebarButtonClass("songs")" OnClick="@(() => _activeSection = "songs")">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                            </svg>
                            Songs
                        </LumexButton>
                        <LumexButton Variant="Variant.Light" Class="@GetSidebarButtonClass("made-for-you")" OnClick="@(() => _activeSection = "made-for-you")">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            Made for You
                        </LumexButton>
                        <LumexButton Variant="Variant.Light" Class="@GetSidebarButtonClass("artists")" OnClick="@(() => _activeSection = "artists")">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path>
                            </svg>
                            Artists
                        </LumexButton>
                        <LumexButton Variant="Variant.Light" Class="@GetSidebarButtonClass("albums")" OnClick="@(() => _activeSection = "albums")">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                            </svg>
                            Albums
                        </LumexButton>
                    </div>
                </div>

                <!-- Playlists Section -->
                <div>
                    <h4 class="text-xs font-semibold text-default-500 uppercase tracking-wider mb-3 px-3">Playlists</h4>
                    <div class="space-y-1">
                        @foreach (var playlist in _playlists)
                        {
                            <LumexButton Variant="Variant.Light" Class="w-full justify-start gap-3 text-sm" OnClick="@(() => SelectPlaylist(playlist))">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                                </svg>
                                @playlist
                            </LumexButton>
                        }
                    </div>
                </div>
            </div>
        </aside>

        <!-- Content Area -->
        <div class="flex-1 overflow-y-auto p-6 bg-default-100">
            <div class="flex justify-end mb-4">
                <LumexButton Color="ThemeColor.Primary">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                    Add music
                </LumexButton>
            </div>

            <!-- Tabs -->
            <LumexTabs SelectedKey="@_selectedTab" SelectedKeyChanged="@((string key) => _selectedTab = key)" Color="ThemeColor.Primary">
                <LumexTab Key="music" Title="Music">
                    <div class="mt-6">
                        <!-- Listen Now Section -->
                        <div class="mb-8">
                            <h3 class="text-2xl font-bold text-foreground mb-1">Listen Now</h3>
                            <p class="text-default-500 mb-4">Top picks for you. Updated daily.</p>
                            <LumexDivider Class="mb-6" />

                            <div class="flex gap-4 overflow-x-auto pb-4">
                                @foreach (var album in _albums)
                                {
                                    <div class="flex-shrink-0 w-[200px] cursor-pointer group">
                                        <LumexCard Class="overflow-hidden">
                                            <div class="aspect-[3/4] overflow-hidden">
                                                <img src="@album.ImageUrl" alt="@album.AlbumName" class="w-full h-full object-cover transition-transform duration-200 group-hover:scale-105" />
                                            </div>
                                            <LumexCardBody Class="p-3">
                                                <p class="text-sm font-medium text-foreground truncate">@album.AlbumName</p>
                                                <p class="text-xs text-default-500 truncate">@album.ArtistName</p>
                                            </LumexCardBody>
                                        </LumexCard>
                                    </div>
                                }
                            </div>
                        </div>

                        <!-- Made for You Section -->
                        <div>
                            <h3 class="text-2xl font-bold text-foreground mb-1">Made for You</h3>
                            <p class="text-default-500 mb-4">Your personal playlists. Updated daily.</p>
                            <LumexDivider Class="mb-6" />

                            <div class="flex gap-4 overflow-x-auto pb-4">
                                @foreach (var album in _madeForYouAlbums)
                                {
                                    <div class="flex-shrink-0 w-[150px] cursor-pointer group">
                                        <LumexCard Class="overflow-hidden">
                                            <div class="aspect-[2/3] overflow-hidden">
                                                <img src="@album.ImageUrl" alt="@album.AlbumName" class="w-full h-full object-cover transition-transform duration-200 group-hover:scale-105" />
                                            </div>
                                            <LumexCardBody Class="p-3">
                                                <p class="text-sm font-medium text-foreground truncate">@album.AlbumName</p>
                                                <p class="text-xs text-default-500 truncate">@album.ArtistName</p>
                                            </LumexCardBody>
                                        </LumexCard>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </LumexTab>

                <LumexTab Key="podcasts" Title="Podcasts">
                    <div class="mt-6">
                        <h3 class="text-2xl font-bold text-foreground mb-1">New Episodes</h3>
                        <p class="text-default-500 mb-4">Your favorite podcasts. Updated daily.</p>
                        <LumexDivider Class="mb-6" />

                        <LumexCard Class="border-2 border-dashed border-default-300">
                            <LumexCardBody Class="flex flex-col items-center justify-center py-16">
                                <svg class="w-12 h-12 text-default-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path>
                                </svg>
                                <h4 class="text-lg font-semibold text-foreground mb-2">No episodes added</h4>
                                <p class="text-default-500 mb-4">You have not added any podcasts. Add one below.</p>
                                <LumexButton Color="ThemeColor.Primary">Add Podcast</LumexButton>
                            </LumexCardBody>
                        </LumexCard>
                    </div>
                </LumexTab>

                <LumexTab Key="live" Title="Live" Disabled="true">
                    <div class="mt-6">
                        <p class="text-default-500">Live content coming soon...</p>
                    </div>
                </LumexTab>
            </LumexTabs>
        </div>
    </div>

    <!-- Player Bar -->
    <div class="flex flex-col sm:flex-row items-center justify-between px-4 py-3 gap-3 border-t border-divider bg-default-50">
        <!-- Now Playing -->
        <div class="flex items-center gap-3 w-full sm:w-1/4">
            @if (_currentSong is not null)
            {
                <div class="w-12 h-12 rounded-lg overflow-hidden">
                    <img src="@_currentSong.ImageUrl" alt="@_currentSong.AlbumName" class="w-full h-full object-cover" />
                </div>
                <div class="min-w-0">
                    <p class="text-sm font-medium text-foreground truncate">@_currentSong.AlbumName</p>
                    <p class="text-xs text-default-500 truncate">@_currentSong.ArtistName</p>
                </div>
                <LumexButton Variant="Variant.Light" Size="Size.Small" Class="ml-2">
                    <svg class="w-5 h-5" fill="@(_isLiked ? "currentColor" : "none")" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                    </svg>
                </LumexButton>
            }
        </div>

        <!-- Controls -->
        <div class="flex flex-col items-center gap-2 w-full sm:w-2/4 order-first sm:order-none">
            <div class="flex items-center gap-4">
                <LumexButton Variant="Variant.Light" Size="Size.Small" OnClick="ToggleShuffle">
                    <svg class="w-5 h-5 @(_isShuffled ? "text-primary" : "")" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                </LumexButton>
                <LumexButton Variant="Variant.Light" Size="Size.Small">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"></path>
                    </svg>
                </LumexButton>
                <LumexButton Color="ThemeColor.Primary" Class="rounded-full w-10 h-10 p-0" OnClick="TogglePlay">
                    @if (_isPlaying)
                    {
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"></path>
                        </svg>
                    }
                    else
                    {
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M8 5v14l11-7z"></path>
                        </svg>
                    }
                </LumexButton>
                <LumexButton Variant="Variant.Light" Size="Size.Small">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"></path>
                    </svg>
                </LumexButton>
                <LumexButton Variant="Variant.Light" Size="Size.Small" OnClick="ToggleRepeat">
                    <svg class="w-5 h-5 @(_repeatMode != RepeatMode.Off ? "text-primary" : "")" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                </LumexButton>
            </div>
            <div class="flex items-center gap-2 w-full max-w-md">
                <span class="text-xs text-default-500 w-10 text-right">@FormatTime(_currentTime)</span>
                <div class="flex-1 h-1 bg-default-200 rounded-full overflow-hidden">
                    <div class="h-full bg-primary rounded-full" style="width: @((_currentTime / _duration) * 100)%"></div>
                </div>
                <span class="text-xs text-default-500 w-10">@FormatTime(_duration)</span>
            </div>
        </div>

        <!-- Volume -->
        <SmallUp Display="flex" Class="items-center gap-2 w-1/4 justify-end">
            <LumexButton Variant="Variant.Light" Size="Size.Small">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                </svg>
            </LumexButton>
            <LumexButton Variant="Variant.Light" Size="Size.Small" OnClick="ToggleMute">
                @if (_isMuted || _volume == 0)
                {
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" clip-rule="evenodd"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path>
                    </svg>
                }
                else
                {
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path>
                    </svg>
                }
            </LumexButton>
            <div class="w-24 h-1 bg-default-200 rounded-full overflow-hidden">
                <div class="h-full bg-default-500 rounded-full" style="width: @(_isMuted ? 0 : _volume)%"></div>
            </div>
        </SmallUp>
    </div>
</div>

@code {
    private string _activeSection = "listen";
    private string _selectedTab = "music";
    private bool _isPlaying = false;
    private bool _isShuffled = false;
    private bool _isLiked = false;
    private bool _isMuted = false;
    private bool _sidebarOpen = false;
    private int _volume = 75;
    private double _currentTime = 73;
    private double _duration = 234;
    private RepeatMode _repeatMode = RepeatMode.Off;

    private Album? _currentSong;

    private List<string> _playlists = new()
    {
        "Recently Added",
        "Recently Played",
        "Top Songs",
        "Top Albums",
        "Top Artists",
        "Logic Discography",
        "Bedtime Beats",
        "Feeling Happy",
        "I miss Y2K Pop",
        "Runtober",
        "Mellow Days",
        "Eminem Essentials"
    };

    private List<Album> _albums = new()
    {
        new("https://images.unsplash.com/photo-1611348586804-61bf6c080437?w=300&dpr=2&q=80", "React Rendezvous", "Ethan Byte"),
        new("https://images.unsplash.com/photo-1468817814611-b7edf94b5d60?w=300&dpr=2&q=80", "Async Awakenings", "Nina Netcode"),
        new("https://images.unsplash.com/photo-1528143358888-6d3c7f67bd5d?w=300&dpr=2&q=80", "The Art of Reusability", "Lena Logic"),
        new("https://images.unsplash.com/photo-1490300472339-79e4adc6be4a?w=300&dpr=2&q=80", "Stateful Symphony", "Beth Binary"),
    };

    private List<Album> _madeForYouAlbums = new()
    {
        new("https://images.unsplash.com/photo-1615247001958-f4bc92fa6a4a?w=300&dpr=2&q=80", "Thinking Components", "Lena Logic"),
        new("https://images.unsplash.com/photo-1513745405825-efaf9a49315f?w=300&dpr=2&q=80", "Functional Fury", "Beth Binary"),
        new("https://images.unsplash.com/photo-1614113489855-66422ad300a4?w=300&dpr=2&q=80", "React Rendezvous", "Ethan Byte"),
        new("https://images.unsplash.com/photo-1446185250204-f94591f7d702?w=300&dpr=2&q=80", "Stateful Symphony", "Beth Binary"),
        new("https://images.unsplash.com/photo-1468817814611-b7edf94b5d60?w=300&dpr=2&q=80", "Async Awakenings", "Nina Netcode"),
        new("https://images.unsplash.com/photo-1490300472339-79e4adc6be4a?w=300&dpr=2&q=80", "The Art of Reusability", "Lena Logic"),
    };

    protected override void OnInitialized()
    {
        _currentSong = _albums.FirstOrDefault();
    }

    private void TogglePlay() => _isPlaying = !_isPlaying;
    private void ToggleShuffle() => _isShuffled = !_isShuffled;
    private void ToggleMute() => _isMuted = !_isMuted;
    
    private void ToggleRepeat()
    {
        _repeatMode = _repeatMode switch
        {
            RepeatMode.Off => RepeatMode.All,
            RepeatMode.All => RepeatMode.One,
            RepeatMode.One => RepeatMode.Off,
            _ => RepeatMode.Off
        };
    }

    private void SelectPlaylist(string playlist)
    {
        _activeSection = playlist;
    }

    private string GetSidebarButtonClass(string section) => 
        _activeSection == section 
            ? "w-full justify-start gap-3 bg-primary/10 text-primary" 
            : "w-full justify-start gap-3";

    private string GetSidebarClass() =>
        _sidebarOpen
            ? "fixed md:relative inset-y-0 left-0 z-50 w-64 flex-shrink-0 border-r border-divider bg-default-50 overflow-y-auto transform translate-x-0 transition-transform duration-300"
            : "fixed md:relative inset-y-0 left-0 z-50 w-64 flex-shrink-0 border-r border-divider bg-default-50 overflow-y-auto transform -translate-x-full md:translate-x-0 transition-transform duration-300";

    private string FormatTime(double seconds)
    {
        var ts = TimeSpan.FromSeconds(seconds);
        return ts.ToString(@"m\:ss");
    }

    private enum RepeatMode { Off, All, One }

    private record Album(string ImageUrl, string AlbumName, string ArtistName);
}
